---
import Base from '/src/layouts/Base.astro'
import Testimonial from '/src/components/Testimonial.astro'
import ConvertkitForm from '/src/components/ConvertkitForm.astro'
import SVG from '/src/components/SVG.svelte'
import { getCollection } from 'astro:content'
import Freebie from '/src/components/Freebie.astro'

let freebies = await getCollection('freebies')

const promises = freebies.map(async freebie => {
  const { Content } = await freebie.render()
  return {
    ...freebie,
    name: freebie.slug.split('/')[0],
    Content,
  }
})
freebies = await Promise.all(promises)
freebies = freebies
  .filter(freebie => freebie.data.status !== 'draft')
  .filter(freebie => freebie.slug.includes('lead'))

export const prerender = true
---

<Base>
  <div class='Wrap ContentBlock'>
    <div class='BasicGrid mOneColumn'>
      <h1>Freebies</h1>

      <!-- Todo: Some Content Here -->
      <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Dicta beatae
        sed debitis ea eveniet sit exercitationem, perspiciatis itaque,
        aspernatur illo mollitia architecto asperiores? Quasi, nihil odio non
        obcaecati accusamus enim.
      </p>
    </div>

    <div class='uInlineSize'>
      <div class='FloatingCard'>
        <Freebie name='learn-javascript' useProductName={true} />
      </div>
    </div>
  </div>
</Base>
